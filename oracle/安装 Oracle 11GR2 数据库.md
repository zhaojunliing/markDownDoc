# å‰è¨€

ç›¸ä¿¡å¤§å®¶ç¬¬ä¸€æ¬¡æ¥è§¦ Oracleï¼Œå¤§éƒ½æ˜¯åœ¨ Windows ä¸Šå®‰è£…ï¼Œæ¯”è¾ƒæ–¹ä¾¿å¿«æ·ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸€ç›´ä¸‹ä¸€æ­¥å°±å¯ä»¥å®‰è£…æˆåŠŸã€‚ç„¶è€Œä¼ä¸šçº§çš„æ•°æ®åº“ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å®‰è£…åœ¨ Linux æœåŠ¡å™¨ä¸Šï¼Œå®‰å…¨ä¸”é«˜æ•ˆã€‚

**æ²¡æ¥è§¦è¿‡ Linux çš„æœ‹å‹ä¸ç”¨å®³æ€•ï¼Œè·Ÿç€æœ¬ç¯‡æ–‡ç« ä¸€æ­¥æ­¥æ“ä½œï¼Œå®‰è£… Oracle å¦‚å–æ°´èˆ¬ç®€å•ä¸”æ ‡å‡†ã€‚**

ä¸‹é¢æˆ‘å°±æ¥æ‰‹æŠŠæ‰‹æ•™å¤§å®¶å¦‚ä½•åœ¨ Linux ä¸Šå®‰è£… Oracle æ•°æ®åº“ã€‚![Image](assets/640.webp)

# ä¸€ã€å‰æœŸå‡†å¤‡

## 1ã€è™šæ‹Ÿæœºå®‰è£…åŒ…

**ç™¾åº¦ç½‘ç›˜ä¸‹è½½é“¾æ¥ï¼š**

```
https://pan.baidu.com/s/15v8kYgPzmjV-ieIFI4hSzQ
```

## 2ã€Oracleè½¯ä»¶å®‰è£…åŒ…

**ç™¾åº¦ç½‘ç›˜ä¸‹è½½é“¾æ¥ï¼š**

```
https://pan.baidu.com/s/1GIw7T32PGEhfu4FFihA9pg
```

## 3ã€Linuxç³»ç»Ÿå®‰è£…åŒ…

ä¸€èˆ¬æœ‰ä¸‰ç§Linuxç³»ç»Ÿæ¯”è¾ƒå¸¸ç”¨ï¼š**ã€ŒRedHatã€** ã€ **ã€ŒOracleLinuxã€** ã€**ã€ŒCentosã€** ã€‚

**ç™¾åº¦ç½‘ç›˜ä¸‹è½½é“¾æ¥ï¼š**

```
https://pan.baidu.com/s/1g-bqeHyfqz917tC_RsXkig
```

## 4ã€Linuxè¿œç¨‹è¿æ¥å·¥å…·

æœ¬æ–‡å°†ä½¿ç”¨XShellå’ŒXftpå·¥å…·ï¼Œå®‰è£…åŒ…å¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½ï¼Œä¹Ÿå¯ç§ä¿¡åšä¸»è·å–ã€‚

å…¶ä»–å·¥å…·ä¹Ÿå¯ä»¥ï¼Œæ¯”å¦‚ï¼šputtyï¼ŒSecureCRT ç­‰ç­‰å·¥å…·ã€‚

**è¿™ç¯‡æ–‡ç« æ¼”ç¤ºRedHat Linux 7.6 ç‰ˆæœ¬å®‰è£… Oracle 11GR2 ç‰ˆæœ¬æ•°æ®åº“ã€‚**

# äºŒã€Linuxä¸»æœºé…ç½®

å®‰è£… `Linux` æ“ä½œç³»ç»Ÿçš„æ­¥éª¤å¯å‚è€ƒï¼š[VMware è™šæ‹Ÿæœºå®‰è£… Linux ç³»ç»Ÿ](http://mp.weixin.qq.com/s?__biz=Mzg5MzcwNzQ0MQ==&mid=2247492161&idx=1&sn=1e164114f7bbaa58a0105f0e19184d9a&chksm=c028179ff75f9e890dd705c2ead642b37a11d4fb1930f8f21a269850a6d53aedeee3d8c6da69&scene=21#wechat_redirect)

ä¸»æœºå†…å­˜ 2G ï¼Œç¡¬ç›˜ 50G å³å¯ã€‚

ä½¿ç”¨XShellå·¥å…·è¿æ¥Linuxä¸»æœºrootç”¨æˆ·ï¼š![Image](assets/640-16401580676193.webp)

## 1ã€ä¸»æœºåé…ç½®

å¦‚æœå®‰è£…æ—¶æ²¡æœ‰é…ç½®ä¸»æœºåï¼Œæˆ–è€…æƒ³è¦ä¿®æ”¹ä¸»æœºåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ï¼š

```
hostnamectl set-hostname orcl
```

![Image](assets/640-16401580676194.webp)

## 2ã€ç½‘ç»œé…ç½®

å¦‚æœå®‰è£…æ—¶æ²¡æœ‰é…ç½®ç½‘ç»œï¼Œæˆ–è€…æƒ³è¦ä¿®æ”¹ç½‘ç»œï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹ï¼š

```
nmcli connection modify eth0 ipv4.addresses 10.211.55.188/24 ipv4.gateway 10.211.55.1 ipv4.method manual autoconnect yes
nmcli connection up eth0
```

![Image](assets/640-16401580676195.webp)

## 3ã€é…ç½®Hostsæ–‡ä»¶

æ ¹æ®ä¸Šé¢é…ç½®å¥½çš„ä¸»æœºåå’ŒIPï¼Œé…ç½®hostsæ–‡ä»¶ï¼š

```
cat <<EOF >>/etc/hosts
##OracleBegin##
##Public IP
10.211.55.188     orcl
##OracleEnd##
EOF
```

![Image](assets/640-16401580676206.webp)

## 4ã€é˜²ç«å¢™é…ç½®

```
systemctl stop firewalld
systemctl disable firewalld
```

![Image](assets/640-16401580676207.webp)

## 5ã€Selinuxé…ç½®

selinuxä¿®æ”¹åéœ€è¦é‡å¯ä¸»æœºç”Ÿæ•ˆï¼š

```
sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config
```

![Image](assets/640-16401580676208.webp)

## 6ã€ISOé•œåƒæºé…ç½®

**ğŸ“¢ æ³¨æ„ï¼š**éœ€è¦å…ˆæŒ‚è½½ä¸»æœºé•œåƒï¼

VMware Workstation æŒ‚è½½ Linux é•œåƒï¼š![Image](assets/640-16401580676209.webp)

```
mount /dev/cdrom /mnt
cat <<EOF>/etc/yum.repos.d/local.repo
[local]
name=local
baseurl=file:///mnt
gpgcheck=0
enabled=1
EOF
```

![Image](assets/640-164015806762010.webp)

## 7ã€å®‰è£…Oracleä¾èµ–åŒ…

å¦‚ä¸‹ä¾èµ–åŒ…ä»Oracleå®˜æ–¹æ–‡æ¡£æ¨èè·å–ï¼š

```
yum install -y bc \
binutils \
compat-libcap1 \
compat-libstdc++-33 \
gcc \
gcc-c++ \
elfutils-libelf \
elfutils-libelf-devel \
glibc \
glibc-devel \
ksh \
libaio \
libaio-devel \
libgcc \
libstdc++ \
libstdc++-devel \
libxcb \
libX11 \
libXau \
libXi \
libXtst \
libXrender \
libXrender-devel \
make \
net-tools \
nfs-utils \
smartmontools \
sysstat \
e2fsprogs \
e2fsprogs-libs \
fontconfig-devel \
expect \
unzip \
openssh-clients \
readline* \
psmisc --skip-broken
```

æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```
rpm -q bc binutils compat-libcap1 compat-libstdc++-33 gcc gcc-c++ elfutils-libelf elfutils-libelf-devel glibc glibc-devel ksh libaio libaio-devel libgcc libstdc++ libstdc++-devel libxcb libX11 libXau libXi libXtst libXrender libXrender-devel make net-tools nfs-utils smartmontools sysstat e2fsprogs e2fsprogs-libs fontconfig-devel expect unzip openssh-clients readline
```

![Image](assets/640-164015806762111.webp)Linux7éœ€è¦æ‰‹åŠ¨å®‰è£…compat-libstdc++ä¾èµ–åŒ…ï¼š

```
rpm -ivh compat-libstdc++-33-3.2.3-72.el7.x86_64.rpm
```

![Image](assets/640-164015806762112.webp)

## 8ã€é…ç½®ZeroConf

```
##å…³é—­Zeroconf serviceçš„æœåŠ¡å®ˆæŠ¤è¿›ç¨‹
systemctl stop avahi-daemon.socket
systemctl stop avahi-daemon.service
systemctl disable avahi-daemon.service
systemctl disable avahi-daemon.socket

##å…³é—­NOZEROCONF
cat <<EOF >>/etc/sysconfig/network
#OracleBegin
NOZEROCONF=yes
#OracleEnd
EOF
```

![Image](assets/640-164015806762113.webp)

## 9ã€å…³é—­é€æ˜å¤§é¡µå’Œnuma

```
sed -i 's/quiet/quiet transparent_hugepage=never numa=off/' /etc/default/grub
grub2-mkconfig -o /boot/grub2/grub.cfg
```

![Image](assets/640-164015806762114.webp)

## 10ã€é…ç½®ç³»ç»Ÿå‚æ•°æ–‡ä»¶

```
##è®¡ç®—shmallå’Œshmmaxå€¼
memTotal=$(grep MemTotal /proc/meminfo | awk '{print $2}')
totalMemory=$((memTotal / 2048))
shmall=$((memTotal / 4))
if [ $shmall -lt 2097152 ]; then
  shmall=2097152
fi
shmmax=$((memTotal * 1024 - 1))
if [ "$shmmax" -lt 4294967295 ]; then
  shmmax=4294967295
fi
echo $shmall
echo $shmmax

##é…ç½®ç³»ç»Ÿå‚æ•°
cat <<EOF >>/etc/sysctl.conf
#OracleBegin
##shmmal's Calculation formula: physical memory 8Gï¼š(8*1024*1024*1024)/4096=2097152
##shmmax's Calculation formula: physical memory 8Gï¼š(8/2)*1024*1024*1024 -1=4294967295
fs.aio-max-nr = 1048576
fs.file-max = 6815744
kernel.shmall = $shmall
kernel.shmmax = $shmmax
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
EOF

##ç³»ç»Ÿå‚æ•°ç”Ÿæ•ˆ
sysctl -p
```

![Image](assets/640-164015806762115.webp)![Image](assets/640-164015806762116.webp)

## 11ã€é…ç½®ç³»ç»Ÿèµ„æºé™åˆ¶

```
cat <<EOF >>/etc/security/limits.conf
#OracleBegin
oracle soft nofile 1024
oracle hard nofile 65536
oracle soft stack 10240
oracle hard stack 32768
oracle soft nproc 2047
oracle hard nproc 16384
oracle hard memlock 134217728
oracle soft memlock 134217728
#OracleEnd
EOF

cat <<EOF >>/etc/pam.d/login
#OracleBegin
session required pam_limits.so 
session required /lib64/security/pam_limits.so
#OracleEnd
EOF
```

![Image](assets/640-164015806762217.webp)![Image](assets/640-164015806762218.webp)

## 12ã€åˆ›å»ºç”¨æˆ·å’Œç»„

```
/usr/sbin/groupadd -g 54321 oinstall
/usr/sbin/groupadd -g 54322 dba
/usr/sbin/groupadd -g 54323 oper

/usr/sbin/useradd -u 54321 -g oinstall -G dba,oper oracle
echo oracle | passwd --stdin oracle
```

![Image](assets/640-164015806762219.webp)

## 13ã€åˆ›å»ºOracleå®‰è£…ç›®å½•

```
mkdir -p /u01/app/oracle/product/11.2.0/db
mkdir -p /u01/app/oraInventory
mkdir -p /oradata
chown -R oracle:oinstall /oradata
chown -R oracle:oinstall /u01/app
chmod -R 775 /u01/app
```

![Image](assets/640-164015806762220.webp)

## 14ã€é…ç½®ç”¨æˆ·ç¯å¢ƒå˜é‡

```
cat <<EOF >>/home/oracle/.bash_profile
################OracleBegin#########################
umask 022
export TMP=/tmp
export TMPDIR=\$TMP
export NLS_LANG=AMERICAN_AMERICA.AL32UTF8
export ORACLE_BASE=/u01/app/oracle
export ORACLE_HOME=/u01/app/oracle/product/11.2.0/db
export ORACLE_HOSTNAME=orcl
export ORACLE_TERM=xterm
export TNS_ADMIN=\$ORACLE_HOME/network/admin
export LD_LIBRARY_PATH=\$ORACLE_HOME/lib:/lib:/usr/lib
export ORACLE_SID=orcl
export PATH=/usr/sbin:\$PATH
export PATH=\$ORACLE_HOME/bin:\$ORACLE_HOME/OPatch:\$PATH
alias sas='sqlplus / as sysdba'
export PS1="[\`whoami\`@\`hostname\`:"'\$PWD]\$ '
EOF
```

![Image](assets/640-164015806762221.webp)

# ä¸‰ã€Oracleè½¯ä»¶å®‰è£…

## 1ã€Oracleè½¯ä»¶åŒ…ä¸Šä¼ 

```
[root@orcl soft]# ll
-rw-r--r--. 1 root root 1395582860 May 31 16:56 p13390677_112040_Linux-x86-64_1of7.zip
-rw-r--r--. 1 root root 1151304589 May 31 16:56 p13390677_112040_Linux-x86-64_2of7.zip
```

![Image](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

## 2ã€è§£å‹Oracleè½¯ä»¶å®‰è£…åŒ…

éœ€è¦æŒ‰é¡ºåºè§£å‹1ï¼Œ2å®‰è£…åŒ…ï¼š

```
cd /soft
unzip -q p13390677_112040_Linux-x86-64_1of7.zip
unzip -q p13390677_112040_Linux-x86-64_2of7.zip

##æˆæƒ/softç»™oracleè¯»å†™æƒé™
chown -R oracle:oinstall /soft
```

![Image](assets/640-164015806762222.webp)

## 3ã€å®‰è£…VNCè½¯ä»¶

```
yum install -y tigervnc*

su - oracle
vncserver
##è¾“å…¥å¯†ç 
```

![Image](assets/640-164015806762323.webp)

## 4ã€è¿æ¥VNCè¿œç¨‹å·¥å…·æˆ–è€…ç›´æ¥æ‰“å¼€è™šæ‹Ÿæœºå›¾å½¢åŒ–ç•Œé¢

![Image](assets/640-164015806762324.webp)å³é”®æ‰“å¼€ç»ˆç«¯å·¥å…·ï¼š![Image](assets/640-164015806762425.webp)è¿›å…¥ /soft/database å¼€å§‹å®‰è£… Oracle è½¯ä»¶ï¼š

```
./runInstaller -jreLoc /etc/alternatives/jre_1.8.0
```

![Image](assets/640-164015806762426.webp)ä¸æ¥æ”¶ Oracle é‚®ä»¶æ¨é€ï¼š![Image](assets/640-164015806762427.webp)ä¸æ›´æ–° Oracleï¼š![Image](assets/640-164015806762528.webp)åªå®‰è£… Oracle è½¯ä»¶ï¼š![Image](assets/640-164015806762529.webp)å•å®ä¾‹å®‰è£…ï¼š![Image](assets/640-164015806762530.webp)é€‰æ‹©ä¼ä¸šç‰ˆï¼š![Image](assets/640-164015806762531.webp)é€‰æ‹©å®‰è£…ç›®å½•ï¼š![Image](assets/640-164015806762632.webp)![Image](assets/640-164015806762633.webp)é€‰æ‹©å®‰è£…ç”¨æˆ·ç»„ï¼š![Image](assets/640-164015806762634.webp)Oracle å®‰è£…å‰å¿…è¦æ£€æŸ¥ï¼š![Image](assets/640-164015806762635.webp)ä¸Šä¼  pdksh-5.2.14-37.el5.x86_64.rpm ä¾èµ–åŒ…å¹¶å®‰è£…ï¼š

```
rpm -e ksh-20120801-142.el7.x86_64
rpm -ivh pdksh-5.2.14-37.el5.x86_64.rpm
```

![Image](assets/640-164015806762636.webp)ç‚¹å‡»å†æ¬¡æ£€æŸ¥ï¼Œå¿½ç•¥ Swap è­¦å‘Šï¼š![Image](assets/640-164015806762737.webp)![Image](assets/640-164015806762738.webp)![Image](assets/640-164015806762739.webp)![Image](assets/640-164015806762740.webp)è§£å†³æ–¹æ¡ˆï¼š

```
su - oracle
sed -i 's/^\(\s*\$(MK_EMAGENT_NMECTL)\)\s*$/\1 -lnnz11/g' $ORACLE_HOME/sysman/lib/ins_emagent.mk
```

æ‰§è¡Œå®Œç‚¹å‡»retryé‡è¯•ï¼š![Image](assets/640-164015806762741.webp)æ‰§è¡Œ root è„šæœ¬ï¼š![Image](assets/640-164015806762742.webp)rootç”¨æˆ·ä¸‹æ‰§è¡Œè„šæœ¬ï¼š

```
/u01/app/oraInventory/orainstRoot.sh
/u01/app/oracle/product/11.2.0/db/root.sh
```

![Image](assets/640-164015806762743.webp)![Image](assets/640-164015806762844.webp)![Image](assets/640-164015806762845.webp)å®‰è£…å®Œæˆåï¼Œé‡å¯ä¸»æœºã€‚

# å››ã€åˆ›å»ºæ•°æ®åº“

## 1ã€æ‰“å¼€ç›‘å¬

```
su - oracle
lsnrctl start
lsnrctl status
```

![Image](assets/640-164015806762846.webp)

## 2ã€è¿æ¥VNCè¿œç¨‹å·¥å…·æˆ–è€…ç›´æ¥æ‰“å¼€è™šæ‹Ÿæœºå›¾å½¢åŒ–ç•Œé¢

```
dbca
```

![Image](assets/640-164015806762847.webp)åˆ›å»ºæ•°æ®åº“ï¼š![Image](assets/640-164015806762848.webp)é€‰æ‹©è‡ªå®šä¹‰æ¨¡å¼ï¼š![Image](assets/640-164015806762849.webp)è¾“å…¥å®ä¾‹åï¼š![Image](assets/640-164015806762850.webp)è¿™é‡Œå¡«å†™æ•°æ®åº“å®ä¾‹åç§°å’Œ dbnameï¼Œæœ¬æ¬¡å¡«å†™ orclã€‚![Image](assets/640-164015806762851.webp)ä¸å®‰è£…EMå·¥å…·ã€‚![Image](assets/640-164015806762952.webp)è¿™é‡Œè¾“å…¥SYSå’ŒSYSTEMç”¨æˆ·çš„å¯†ç ï¼Œéœ€è¦è®°ä½ã€‚![Image](assets/640-164015806762953.webp)è¿™é‡Œé€‰æ‹©å‰é¢å»ºå¥½çš„/oradataç›®å½•ç”¨æ¥å­˜æ”¾æ•°æ®æ–‡ä»¶ã€‚![Image](assets/640-164015806762954.webp)ä¸å¼€å¯é—ªå›æ—¥å¿—ï¼Œä¸å¼€å¯å½’æ¡£æ—¥å¿—ï¼Œå¯ä»¥å»ºå¥½åº“ä¹‹åå†æ‰‹åŠ¨ä¿®æ”¹ã€‚![Image](assets/640-164015806763055.webp)![Image](assets/640-164015806763056.webp)æ•°æ®åº“å†…å­˜åˆ†é…ï¼Œé€‰æ‹©æ‰‹åŠ¨åˆ†é…ï¼Œå ç”¨ç‰©ç†å†…å­˜70%å·¦å³ã€‚![Image](assets/640-164015806763057.webp)block_sizeæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼Œä¸€æ—¦å»ºåº“æ— æ³•ä¿®æ”¹ï¼Œé»˜è®¤8Kã€‚![Image](assets/640-164015806763058.webp)å­—ç¬¦é›†æ ¹æ®éœ€è¦è¿›è¡Œé€‰æ‹©ï¼Œé»˜è®¤AL32UTF8ã€‚![Image](assets/640-164015806763059.webp)![Image](assets/640-164015806763060.webp)![Image](assets/640-164015806763161.webp)![Image](assets/640-164015806763162.webp)ç­‰å¾…å»ºåº“å®Œæˆå³å¯ã€‚![Image](assets/640-164015806763163.webp)

# äº”ã€è¿æ¥æ•°æ®åº“

ç¡®ä¿ç›‘å¬æ­£å¸¸å¯åŠ¨ï¼Œå¹¶ç›‘å¬æ•°æ®åº“ï¼š![Image](assets/640-164015806763164.webp)

## 1ã€é€šè¿‡æ•°æ®åº“ä¸»æœºè¿æ¥

```
su - oracle
sqlplus / as sysdba
select sysdate from dual;

##åˆ›å»ºæ•°æ®åº“ç”¨æˆ·
create user test identified by test;
grant dba to test;
conn test/test

##åˆ›å»ºè¡¨
create table test (id number not null,name varchar2(100));
insert into test values (1,'lucifer');
commit;
```

## 2ã€é€šè¿‡PL/SQLè¿æ¥testç”¨æˆ·

![Image](assets/640-164015806763165.webp)![Image](assets/640-164015806763166.webp)**è‡³æ­¤ï¼ŒOracleæ•°æ®åº“å·²ç»å®‰è£…å®Œæ¯•ã€‚**